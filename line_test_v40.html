<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
  <meta property="og:title" content="WS-Cards">
  <meta property="og:type" content="website">  
  <meta property="og:image" content="https://ws-cards.cloud/favicon.ico">  
  <meta property="og:url" content="https://ws-cards.cloud">  
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="white-translucent">
  <meta name="apple-mobile-web-app-title" content="WS-Cards">  
  <link rel="apple-touch-icon" href="https://ws-cards.cloud/favicon.ico"> 
  <meta name="msapplication-TileImage" content="https://ws-cards.cloud/favicon.ico">
  <meta name="msapplication-TileColor" content="#fff">  
  <link rel="manifest" href="/manifest.json">	
  <title>WS卡片雲|WS-Cards(β)</title>
  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap"> 
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <link rel="stylesheet" href="dist/css/wscards.line.css">
<style>
	ul.typeahead.dropdown-menu {
    max-height: 300px;
    overflow-y: auto;
    overflow-x: hidden;
        z-index: 9999 !important; /* 設定非常高的 z-index */
	}	
	:root {
		--primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		--secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
		--glass-bg: rgba(255, 255, 255, 0.1);
		--glass-border: rgba(255, 255, 255, 0.2);
		--text-primary: #2d3748;
		--text-secondary: #718096;
		--shadow-soft: 0 10px 25px rgba(0, 0, 0, 0.1);
		--shadow-medium: 0 20px 40px rgba(0, 0, 0, 0.15);
		--border-radius: 20px;
		--border-radius-small: 12px;
	}

	body {
		background: #ffffff;
		font-family: 'Noto Sans TC', 'Inter', sans-serif;
	}

	.main-header {
		background: rgba(255, 255, 255, 0.1) !important;
		backdrop-filter: blur(20px);
		border: 1px solid rgba(255, 255, 255, 0.2);
		box-shadow: var(--shadow-soft);
		border-radius: 0 0 var(--border-radius) var(--border-radius);
	}

	.main-sidebar {
		background: rgba(255, 255, 255, 0.1) !important;
		backdrop-filter: blur(20px);
		border: 1px solid rgba(255, 255, 255, 0.2);
	}

	.content-wrapper {
		background: transparent !important;
		padding: 2rem;
	}

	.card {
		background: rgba(255, 255, 255, 0.15) !important;
		backdrop-filter: blur(20px);
		border: 1px solid rgba(255, 255, 255, 0.2);
		border-radius: var(--border-radius) !important;
		box-shadow: var(--shadow-medium);
		transition: all 0.3s ease;
		overflow: visible;
	}

	.card:hover {
		transform: translateY(-5px);
		box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
	}

	.card-header {
		background: rgba(255, 255, 255, 0.1) !important;
		border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
		border-radius: var(--border-radius) var(--border-radius) 0 0 !important;
	}
	.form-control {
		background: rgba(255, 255, 255, 0.2) !important;
		border: 2px solid rgba(255, 255, 255, 0.3);
		border-radius: var(--border-radius-small) !important;
		color: var(--text-primary);
		backdrop-filter: blur(10px);
		transition: all 0.3s ease;
		padding: 1rem 1.5rem;
		font-size: 1rem;
	}

	.form-control:focus {
		background: rgba(255, 255, 255, 0.3) !important;
		border-color: #667eea;
		box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
		transform: translateY(-2px);
	}

	.form-control::placeholder {
		color: rgba(45, 55, 72, 0.6);
	}

	.btn {
		border-radius: var(--border-radius-small) !important;
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.5px;
		transition: all 0.3s ease;
		border: none;
		padding: 0.75rem 1.5rem;
	}

	.btn-outline-secondary {
		background: rgba(255, 255, 255, 0.2);
		border: 2px solid rgba(255, 255, 255, 0.3);
		color: var(--text-primary);
		backdrop-filter: blur(10px);
	}

	.btn-outline-secondary:hover {
		background: var(--primary-gradient);
		color: white;
		transform: translateY(-2px);
		box-shadow: var(--shadow-soft);
	}

	select {
		background: rgba(255, 255, 255, 0.2) !important;
		border: 2px solid rgba(255, 255, 255, 0.3) !important;
		border-radius: var(--border-radius-small) !important;
		color: var(--text-primary) !important;
		backdrop-filter: blur(10px);
		padding: 1rem !important;
		font-size: 1rem !important;
		transition: all 0.3s ease;
		min-width: 300px;
		margin: 0.5rem;
		max-width: 100%;
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
	}

	select option {
		max-width: 100%;
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
		padding: 0.5rem;
	}

	select:focus {
		border-color: #667eea !important;
		box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25) !important;
		transform: translateY(-2px);
	}



	.input-group-append .btn {
		border-radius: 0 var(--border-radius-small) var(--border-radius-small) 0 !important;
		border-left: none;
	}

	.content-header h1 {
		background: var(--primary-gradient);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
		font-weight: 800;
		font-size: 2.5rem;
		margin-bottom: 0;
	}

	.card-title {
		color: var(--text-primary);
		font-weight: 700;
		font-size: 1.25rem;
	}


	.small, small {
		color: var(--text-secondary);
		font-weight: 500;
	}


	.nav-link {
		color: rgba(45, 55, 72, 0.8) !important;
		font-weight: 500;
		transition: all 0.3s ease;
	}

	.nav-link:hover {
		color: var(--text-primary) !important;
		background: rgba(255, 255, 255, 0.1) !important;
		border-radius: var(--border-radius-small);
	}
  .nav-link.active {
      color: #ffffff !important;
      background: rgba(2, 27, 138, 0.669) !important;
  }
	.main-footer {
		background: rgba(255, 255, 255, 0.1) !important;
		backdrop-filter: blur(20px);
		border-top: 1px solid rgba(255, 255, 255, 0.2);
		border-radius: var(--border-radius) var(--border-radius) 0 0;
	}

	.modal-content {
		background: rgba(255, 255, 255, 0.95) !important;
		backdrop-filter: blur(20px);
		border: 1px solid rgba(255, 255, 255, 0.2);
		border-radius: var(--border-radius) !important;
		box-shadow: var(--shadow-medium);
	}

	.modal-header {
		border-bottom: 1px solid rgba(255, 255, 255, 0.2) !important;
		background: rgba(255, 255, 255, 0.1) !important;
	}

	/* 手機版固定導航欄 */
	@media (max-width: 768px) {
		.main-header {
			position: fixed !important;
			top: 0;
			left: 0;
			right: 0;
			z-index: 1030;
			width: 100%;
		}
		
		.content-wrapper {
			margin-top: 80px !important;
			padding: 1rem;
		}
		
		.main-sidebar {
			top: 80px;    
		}
		.sidebar{
      background: rgba(255, 255, 255, 1) !important;
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);        
    }
		.navbar-brand-wrapper {
			position: static;
			transform: none;
		}
		
		.filter-container {
			grid-template-columns: 1fr;
			gap: 1rem;
		}
		
		select {
			width: 100% !important;
			min-width: unset !important;
			margin: 0.25rem 0 !important;
			font-size: 0.9rem !important;
			padding: 0.75rem !important;
		}
		
		/* 針對長文字選項的處理 */
		#cardStandard, #cardTitle {
			max-width: calc(100vw - 4rem) !important;
		}
		
		select option {
			font-size: 0.85rem;
			padding: 0.5rem;
			line-height: 1.2;
		}
		
		.card {
			margin-bottom: 1.5rem;
		}
		
		.content-header h1 {
			font-size: 2rem;
		}
		
		.filter-group {
			margin-bottom: 1rem;
		}
		
		.filter-label {
			font-size: 0.9rem;
			margin-bottom: 0.75rem;
		}
	}

	/* 動畫效果 */
	@keyframes fadeInUp {
		from {
			opacity: 0;
			transform: translateY(30px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.card {
		animation: fadeInUp 0.6s ease-out;
	}

	.card:nth-child(1) { animation-delay: 0.1s; }
	.card:nth-child(2) { animation-delay: 0.2s; }
	.card:nth-child(3) { animation-delay: 0.3s; }
	.card:nth-child(4) { animation-delay: 0.4s; }

	/* 圖片樣式改進 */
	#cardImg {
		border-radius: var(--border-radius-small);
		box-shadow: var(--shadow-soft);
		transition: all 0.3s ease;
	}

	#cardImg:hover {
		transform: scale(1.05);
		box-shadow: var(--shadow-medium);
	}

	/* 現代化導航欄樣式 */
	.modern-navbar {
		padding: 1rem 2rem;
	}

	.navbar-brand-wrapper {
		position: absolute;
		left: 50%;
		transform: translateX(-50%);
		text-align: center;
	}

	.navbar-brand-text {
		font-size: 1.5rem;
		font-weight: 800;
		background: var(--primary-gradient);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
		display: block;
		line-height: 1;
	}

	.navbar-subtitle {
		font-size: 0.75rem;
		color: var(--text-secondary);
		font-weight: 500;
	}

	.modern-nav-link {
		border-radius: var(--border-radius-small) !important;
		padding: 0.5rem 1rem !important;
		margin: 0 0.25rem;
		transition: all 0.3s ease;
	}

	.modern-nav-link:hover {
		background: rgba(255, 255, 255, 0.2) !important;
		transform: translateY(-2px);
	}

	.modern-dropdown {
		background: rgba(255, 255, 255, 0.95) !important;
		backdrop-filter: blur(20px);
		border: 1px solid rgba(255, 255, 255, 0.2);
		border-radius: var(--border-radius-small) !important;
		box-shadow: var(--shadow-medium);
	}

	/* 資訊橫幅 */
	.info-banner {
		background: rgba(255, 255, 255, 0.15);
		backdrop-filter: blur(20px);
		border: 1px solid rgba(255, 255, 255, 0.2);
		border-radius: var(--border-radius);
		padding: 1.5rem;
		margin-bottom: 2rem;
		display: flex;
		align-items: center;
		box-shadow: var(--shadow-soft);
	}

	.info-icon {
		background: var(--primary-gradient);
		color: white;
		width: 3rem;
		height: 3rem;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		margin-right: 1rem;
		box-shadow: var(--shadow-soft);
	}

	.info-content h6 {
		margin: 0;
		font-weight: 700;
		color: var(--text-primary);
	}

	.info-content p {
		margin: 0;
		color: var(--text-secondary);
		font-size: 0.9rem;
	}

	/* 搜尋卡片 */
	.search-card {
		margin-bottom: 2rem;
	}

	.search-container {
		padding: 1rem;
	}

	.modern-input-group {
		position: relative;
		display: flex;
		align-items: center;
	}

	.input-icon {
		position: absolute;
		left: 1rem;
		z-index: 10;
		color: var(--text-secondary);
	}

	.modern-input {
		padding-left: 3rem !important;
		border-radius: var(--border-radius-small) 0 0 var(--border-radius-small) !important;
	}

	.btn-modern-primary {
		background: var(--primary-gradient) !important;
		color: white !important;
		border: none !important;
		padding: 1rem 1.5rem;
		font-weight: 600;
	}

	.btn-modern-primary:hover {
		transform: translateY(-2px);
		box-shadow: var(--shadow-soft);
	}

	.search-hint {
		display: flex;
		align-items: center;
		margin-top: 1rem;
		padding: 0.75rem 1rem;
		background: rgba(255, 255, 255, 0.1);
		border-radius: var(--border-radius-small);
		color: var(--text-secondary);
		font-size: 0.9rem;
	}

	/* 篩選卡片 */
	.filter-container {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
		gap: 2rem;
		padding: 1rem;
	}

	.filter-group {
		display: flex;
		flex-direction: column;
	}

	.filter-label {
		display: flex;
		align-items: center;
		margin-bottom: 0.5rem;
		font-weight: 600;
		color: var(--text-primary);
	}

	.modern-select {
		width: 100% !important;
		min-width: unset !important;
		margin: 0 !important;
	}

	/* 預覽卡片 */
	.preview-container {
		text-align: center;
		min-height: 300px;
		display: flex;
		align-items: center;
		justify-content: center;
    flex-direction: column; /* 添加這行，確保垂直排列 */
    position: relative; /* 添加相對定位 */    
	}

	.image-placeholder {
		color: var(--text-secondary);
	}

	.image-placeholder i {
		font-size: 3rem;
		margin-bottom: 1rem;
		opacity: 0.5;
	}

	.modern-card-image {
		max-height: 400px;
		border-radius: var(--border-radius-small);
		box-shadow: var(--shadow-soft);
	}

	/* 資訊卡片 */
	.info-placeholder {
		display: grid;
		gap: 1rem;
	}
	/* 圖表卡片 */
	.chart-container {
		position: relative;
		min-height: 300px;
	}

	.chart-placeholder {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		text-align: center;
		color: var(--text-secondary);
	}

	.chart-placeholder i {
		font-size: 3rem;
		margin-bottom: 1rem;
		opacity: 0.5;
	}

	.chart-period {
		font-size: 0.8rem;
		font-weight: 400;
		color: var(--text-secondary);
	}

	.modern-chart {
		background: rgba(255, 255, 255, 0.05);
		border-radius: var(--border-radius-small);
		padding: 1rem;
	}

	/* 現代化工具按鈕 */
	.modern-tool-btn {
		background: rgba(255, 255, 255, 0.1) !important;
		border: 1px solid rgba(255, 255, 255, 0.2) !important;
		border-radius: var(--border-radius-small) !important;
		color: var(--text-primary) !important;
		transition: all 0.3s ease;
	}

	.modern-tool-btn:hover {
		background: rgba(255, 255, 255, 0.2) !important;
		transform: translateY(-2px);
	}

	/* 現代化載入動畫 */
	.modern-overlay {
		background: rgba(255, 255, 255, 0.9) !important;
		backdrop-filter: blur(10px);
		border-radius: var(--border-radius-small);
	}

	.modern-spinner {
		margin-bottom: 1rem;
	}

	.spinner-border {
		width: 3rem;
		height: 3rem;
		border-width: 0.3rem;
		border-color: transparent;
		border-top-color: #667eea;
		border-right-color: #667eea;
	}

	/* 暗色模式 */
	[data-theme="dark"] {
		--text-primary: #f7fafc;
		--text-secondary: #a0aec0;
		--glass-bg: rgba(0, 0, 0, 0.2);
		--glass-border: rgba(255, 255, 255, 0.1);
	}

	[data-theme="dark"] body {
		background: #1a1a1a;
	}

	[data-theme="dark"] .form-control {
		color: var(--text-primary);
	}

	[data-theme="dark"] .form-control::placeholder {
		color: rgba(247, 250, 252, 0.6);
	}

	/* 暗色模式下的導航連結 */
	[data-theme="dark"] .nav-link {
		color: rgba(247, 250, 252, 0.8) !important;
	}

	[data-theme="dark"] .nav-link:hover {
		color: #ffffff !important;
		background: rgba(255, 255, 255, 0.15) !important;
	}

	[data-theme="dark"] .nav-link.active {
		color: #667eea !important;
		background: rgba(102, 126, 234, 0.2) !important;
	}

	/* 暗色模式下的側邊欄 */
	[data-theme="dark"] .main-sidebar {
		background: rgba(0, 0, 0, 0.3) !important;
	}

	[data-theme="dark"] .sidebar-dark-primary .nav-sidebar > .nav-item > .nav-link {
		color: rgba(247, 250, 252, 0.8) !important;
	}

	[data-theme="dark"] .sidebar-dark-primary .nav-sidebar > .nav-item > .nav-link:hover {
		color: #ffffff !important;
		background: rgba(255, 255, 255, 0.1) !important;
	}

	[data-theme="dark"] .sidebar-dark-primary .nav-sidebar > .nav-item > .nav-link.active {
		color: #667eea !important;
		background: rgba(102, 126, 234, 0.2) !important;
	}

	/* 暗色模式下的品牌文字 */
	[data-theme="dark"] .brand-text {
		color: rgba(247, 250, 252, 0.9) !important;
	}

	/* 暗色模式下的樹狀選單 */
	[data-theme="dark"] .nav-treeview > .nav-item > .nav-link {
		color: rgba(247, 250, 252, 0.7) !important;
	}

	[data-theme="dark"] .nav-treeview > .nav-item > .nav-link:hover {
		color: #ffffff !important;
		background: rgba(255, 255, 255, 0.08) !important;
	}

	[data-theme="dark"] .nav-treeview > .nav-item > .nav-link.active {
		color: #667eea !important;
		background: rgba(102, 126, 234, 0.15) !important;
	}

	/* 暗色模式下的導航圖標 */
	[data-theme="dark"] .nav-icon {
		color: rgba(247, 250, 252, 0.8) !important;
	}

	[data-theme="dark"] .nav-link.active .nav-icon {
		color: #667eea !important;
	}

	/* 微交互動畫 */
	@keyframes pulse {
		0%, 100% { transform: scale(1); }
		50% { transform: scale(1.05); }
	}

	.info-icon {
		animation: pulse 2s infinite;
	}

	/* 平滑滾動 */
	html {
		scroll-behavior: smooth;
	}

	/* 超小螢幕優化 */
	@media (max-width: 480px) {
		.content-wrapper {
			padding: 0.5rem;
		}
		
		.card {
			margin-bottom: 1rem;
			border-radius: 12px !important;
		}
		
		.card-body {
			padding: 1rem;
		}
		
		select {
			font-size: 0.85rem !important;
			padding: 0.65rem !important;
		}
		
		#cardStandard, #cardTitle {
			max-width: calc(100vw - 2rem) !important;
		}
		
		.filter-container {
			padding: 0.5rem;
			gap: 0.75rem;
		}
		
		.content-header h1 {
			font-size: 1.75rem;
		}
		
		.modern-input {
			font-size: 0.9rem !important;
			padding: 0.75rem 2.5rem 0.75rem 2.5rem !important;
		}
    .input-icon {
        left: 0.5rem;
    }
      
	}  
 
/*****************card info******************/
/* 滑動容器 */
.info-swiper {
    position: relative;
    overflow: hidden;
    border-radius: var(--border-radius-small);
    cursor: grab;
    user-select: none;    
}
.info-swiper:active {
    cursor: grabbing;
}

.info-swiper::before {
    content: "← 滑動查看更多 →";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(102, 126, 234, 0.9);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    z-index: 20;
    opacity: 0;
    animation: slideHint 3s ease-in-out infinite;
    pointer-events: none;
    white-space: nowrap;
}

@keyframes slideHint {
    0%, 80%, 100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
    }
    20%, 60% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
}

/* 當開始滑動時隱藏提示 */
.info-swiper.dragging::before {
    display: none !important;
}

/* 當標記為已看過時永久隱藏提示 */
.info-swiper.hint-hidden::before {
    display: none !important;
    animation: none !important;
}

.info-items-container {
    display: flex;
    transition: transform 0.3s ease;
    width: 100%;
    will-change: transform;   
}
.info-items-container.no-transition {
    transition: none;
}
.info-item {
    display: grid;
    gap: 0.75rem; /* 行間距和列間距 */
    padding: 1rem;
    background: rgb(255, 255, 255);
    border-radius: var(--border-radius-small);
    
    /* 關鍵修正：確保每個 item 與容器寬度一致 */
    width: 100%; /* 與容器同寬 */
    min-width: 100%; /* 最小寬度也是100% */
    max-width: 100%; /* 最大寬度限制為100% */
    
    box-sizing: border-box;
    transition: all 0.3s ease;
    flex-shrink: 0; /* 防止收縮 */
    margin: 0; /* 確保沒有margin */
}
/* 混合佈局：同時包含兩欄和單欄 */
.info-item.mixed-layout {
    grid-template-columns: 1fr 1fr; /* 預設兩欄 */
    grid-template-areas: 
        "col1 col2"
        "full full"; /* 為單欄內容預留完整寬度區域 */
}

/* 單欄區域的內容 */
.info-item.mixed-layout .info-row.full-width {
    grid-column: 1 / -1; /* 跨越所有欄位 */
}

/* 或者使用更靈活的方式 */
.info-item.auto-layout {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* 自適應欄數 */
    gap: 0.75rem;
}

.info-item.auto-layout .info-row.span-full {
    grid-column: 1 / -1; /* 跨越所有欄位 */
}


.info-item.active {
    transform: scale(1.02);
}

/* 新增的行樣式 */
.info-row {
    display: flex;
    align-items: center;
    padding: 0.5rem 0.75rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--border-radius-small);
    transition: all 0.3s ease;
    border-left: 3px solid transparent;
    min-height: 40px; /* 確保一致高度 */
}

.info-row i {
    color: #667eea;
    width: 20px; /* 固定圖標寬度，確保對齊 */
    text-align: center;
    flex-shrink: 0; /* 防止圖標縮小 */
}

.info-row span:first-of-type {
    color: var(--text-secondary);
    font-weight: 500;
    min-width: 60px; /* 確保標籤寬度一致 */
    flex-shrink: 0; /* 防止圖標縮小 */  
}

.info-value {
    margin-left: auto;
    font-weight: 600;
    color: var(--text-primary);
    background: rgba(102, 126, 234, 0.1);
    padding: 0.25rem 0.5rem;
    border-radius: 6px;
    font-size: 0.9rem;
    word-wrap: break-word; /* 長單詞自動換行 */
    word-break: break-word; /* 在需要時斷開長單詞 */
    overflow-wrap: break-word; /* 現代瀏覽器的換行屬性 */
    line-height: 1.2; /* 設定行高讓多行文字更好看 */
    max-width: 120px; /* 可選：設定最大寬度控制換行時機 */
    text-align: right; /* 保持右對齊 */
}

.info-value.white-space-nowrap {
    white-space: nowrap; /* 不換行 */
}


/* 暗色模式下的樣式 */
[data-theme="dark"] .info-row {
    background: rgba(0, 0, 0, 0.1);
}

[data-theme="dark"] .info-value {
    background: rgba(102, 126, 234, 0.2);
    color: var(--text-primary);
}

/* 滑動指示器 */
.swipe-indicators {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 1rem;
}

.swipe-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
}

.swipe-dot.active {
    background: var(--primary-gradient);
    transform: scale(1.2);
}

/* 手機版優化 */
@media (max-width: 768px) {
    .info-swiper::before {
        font-size: 0.75rem;
        padding: 0.4rem 0.8rem;
    }
    .info-swiper {
        padding: 0;
        margin: 0;
        width: 100%;
        overflow: hidden;
        box-sizing: border-box;
    }    
    .info-items-container {
        padding: 0;
        margin: 0;
        width: 100%;
        box-sizing: border-box;
    }

    .info-item {
        grid-template-columns: 1fr 1fr; /* 保持兩欄 */
        gap: 0.4rem;
        padding: 0.6rem;
        
        /* 手機版寬度設定 */
        width: 100%;
        min-width: 100%;
        max-width: 100%;
        
        margin: 0;
        background: rgba(255, 255, 255, 0.1);
        box-sizing: border-box;
        flex-shrink: 0;
    }
    
    .info-item.single-column {
        grid-template-columns: 1fr; /* 手機版保持單欄 */
    }
    
    .info-row {
        padding: 0.3rem 0.5rem;
        font-size: 0.85rem;
        min-height: 35px;
        width: 100%;
        margin: 0;
        box-sizing: border-box;
    }
     .info-row i {
        width: 16px;
        font-size: 0.8rem;
    }   
    .info-row span:first-of-type {
        min-width: 35px;
        font-size: 0.8rem;
        margin-right: 0.3rem;
    }
    
    .info-value {
        font-size: 0.75rem;
        padding: 0.2rem 0.3rem;
        margin-left: 0.2rem;
        max-width: 80px; /* 手機版更小的最大寬度 */
        line-height: 1.1;
    }    
    
    .info-row span:first-of-type {
        min-width: 35px; /* 減少標籤寬度 */
        font-size: 0.8rem;
        margin-right: 0.3rem;
    }    
  }
/* 動畫效果 */
@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}
/* 確保父容器也不會影響寬度 */
.card-body {
    padding: 1rem;
    box-sizing: border-box;
}

.info-card .card-body {
    padding: 1rem;
    box-sizing: border-box;
    overflow: hidden; /* 防止內容溢出 */
}

/* 手機版父容器調整 */
@media (max-width: 768px) {
    .card-body {
        padding: 0.75rem;
    }
    
    .info-card .card-body {
        padding: 0.5rem;
    }
}

.info-row {
    animation: slideInRight 0.3s ease-out;
}
/* 針對特別長的內容的特殊樣式 */
.info-value.long-text {
    max-width: none; /* 移除寬度限制 */
    min-width: 100px; /* 設定最小寬度 */
    text-align: left; /* 長文字左對齊更好讀 */
    margin-left: 0.5rem;
}


.info-row:nth-child(1) { animation-delay: 0.1s; }
.info-row:nth-child(2) { animation-delay: 0.15s; }
.info-row:nth-child(3) { animation-delay: 0.2s; }
.info-row:nth-child(4) { animation-delay: 0.25s; }
.info-row:nth-child(5) { animation-delay: 0.3s; }
.info-row:nth-child(6) { animation-delay: 0.35s; }

/* 浮動回到頂部按鈕 */
.scroll-to-top-btn {
    position: fixed;
    bottom: 70px;
    right: 30px;
    width: 50px;
    height: 50px;

    color: black;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: rgba(247, 239, 255, 0.2);
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transform: translateY(20px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    border: 2px solid rgba(56, 52, 61, 0.2);
}

.scroll-to-top-btn.visible {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.scroll-to-top-btn:hover {
    transform: translateY(-5px) scale(1.1);
    box-shadow: 0 25px 50px rgba(211, 215, 237, 0.4);
}

.scroll-to-top-btn:active {
    transform: translateY(-2px) scale(1.05);
}

.scroll-to-top-btn i {
    font-size: 1.2rem;
    transition: transform 0.3s ease;
}

.scroll-to-top-btn:hover i {
    transform: translateY(-2px);
}

/* 暗色模式下的樣式 */
[data-theme="dark"] .scroll-to-top-btn {
    background: var(--primary-gradient);
    border: 2px solid rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .scroll-to-top-btn:hover {
    box-shadow: 0 25px 50px rgba(102, 126, 234, 0.6);
}

/* 手機版調整 */
@media (max-width: 768px) {
    .scroll-to-top-btn {
        bottom: 50px;
        right: 20px;
        width: 45px;
        height: 45px;
    }
    
    .scroll-to-top-btn i {
        font-size: 1rem;
    }
}

/* 超小螢幕調整 */
@media (max-width: 480px) {
    .scroll-to-top-btn {
        bottom: 55px;
        right: 15px;
        width: 40px;
        height: 40px;
    }
    
    .scroll-to-top-btn i {
        font-size: 0.9rem;
    }
}

/* 按鈕脈衝動畫（可選） */
@keyframes pulse-glow {
    0%, 100% {
        box-shadow: var(--shadow-medium);
    }
    50% {
        box-shadow: 0 25px 50px rgba(102, 126, 234, 0.3);
    }
}

.scroll-to-top-btn.pulse {
    animation: pulse-glow 2s infinite;
}

/* 當搜尋框被 focus 時，篩選卡片變成半透明 */
#filter-card-tag {
    transition: opacity 0.3s ease, transform 0.3s ease;
}

#filter-card-tag.dimmed {
    opacity: 0.6;
    transform: scale(0.98);
}
/* 或者也可以添加模糊效果（可選） */
#filter-card-tag.dimmed-blur {
    opacity: 0.6;
    filter: blur(2px);
    transform: scale(0.98);
}
</style>	
</head>
<body class="hold-transition sidebar-mini  layout-fixed layout-navbar-fixed">
<div class="wrapper">

  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button" id="leftbar"><i class="fas fa-bars"  id="mainBarIcon"></i></a>
      </li>
    </ul>
    <div class="font-semibold text-lg">各卡號漲幅趨勢</div>
    <div class="text-xs text-gray-500">(WS)  </div>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button"><i class="fas fa-bullhorn"  id="rightBarIcon"></i></a>
      </li>
    </ul>
  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container (sidebar-dark-primary -->
  <aside class="main-sidebar elevation-4" id="mainSideBar">
    <!-- Brand Logo -->
    <a href="./" class="brand-link">
      <img src="dist/img/logo.png" alt="Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">WS-Cards</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
          <li class="nav-item menu-open">
            <a href="#" class="nav-link active">
              <i class="nav-icon fas fa-tachometer-alt"></i>
              <p>
                遊遊亭價格查詢
                <i class="right fas fa-angle-left"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="line" class="nav-link active">
                  <i class="fas fa-chart-line nav-icon"></i>
                  <p>各卡號漲幅趨勢(WS)</p>
                </a>
              </li>
            </ul>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="lineWSR" class="nav-link">
                  <i class="fas fa-chart-line nav-icon"></i>
                  <p>各卡號漲幅趨勢(WSR)</p>
                </a>
              </li>
            </ul>			
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="deckPrice" class="nav-link">
                  <i class="fas fa-search-dollar nav-icon"></i>
                  <p>牌組總額查詢計算機</p>
                </a>
              </li>
            </ul>				
          </li>
		  <li  class="nav-item">
            <a href="championList" class="nav-link">
			  <i class="nav-icon fas fa-trophy"></i>
              <p>
                優勝牌組查詢 (Beta)
              </p>
            </a>		  
		  </li>			  		  
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
      <!-- Main content -->
      <div class="content">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-12">
              <div class="info-banner">
                <div class="info-icon">
                  <i class="fas fa-clock"></i>
                </div>
                <div class="info-content">
                  <h6>自動更新通知</h6>
                  <p>價格固定更新時間為(UTC +8) 24:00</p>
                </div>
              </div>
            </div>
            <!-- 輸入 -->
            <div class="col-lg-12">
              <div class="card search-card">
                <div class="card-header">
                  <h5 class="card-title">
                    <i class="fas fa-search mr-2"></i>
                    快速搜尋
                  </h5>
                </div>
                <div class="card-body">
                  <!-- Search Input with Modern Design -->
                  <div class="search-container">                
                      <!-- Input form -->
                    <div class="input-group">
                        <input id="xxxx" type="text" name="pattern" placeholder="請輸入作品名稱、作品代碼或完整卡號 (例如: PRD/W01-001)" value="" autocomplete="off" style="display: block" class="form-control typeahead" list="mylist" >
                            <div class="input-group-append">
                                <button class="btn btn-outline-secondary" type="button" id="pasteButton" title="貼上">
                                    <i class="fas fa-paste"></i>
                                </button>
                            </div>
                      </div>
                      
                        <div class="search-hint">
                            <i class="fas fa-lightbulb mr-2"></i>
                            <small class="form-text text-muted">小提示：支援模糊搜尋或是直接輸入完整卡號進行快速搜尋，格式如 PRD/W01-001</small>
                        </div>                   
                  </div>
                </div>
              </div>	
            </div>		

            <!-- 選單 -->
            <div class="col-lg-12">
              <div class="card filter-card" id="filter-card-tag">
                <div class="card-header">
                  <h5 class="card-title">
                    <i class="fas fa-filter mr-2"></i>
                    篩選條件
                  </h5>
                </div>              
                  <div class="card-body">
                    <div class="filter-container">
                      <div class="filter-group">
                        <label class="filter-label">
                          <i class="fas fa-layer-group mr-2"></i>作品系列
                        </label>
                        <select name="cardStandard" id="cardStandard" onclick="removeTitle();" onchange="changeStandard();"  style="font-family: 'Noto Sans TC', sans-serif;width:300px;"> 
                        <optgroup label="ヴァイスサイド" id="Weiss" style="background-color: white">
                          <option value="000/000-000" id="notuse">選擇作品</option> 
                        </optgroup>
                        <optgroup label="シュヴァルツサイド" id="Schwarz" style="background-color: gray">
                          <option value="000/000-000"></option> 						
                        </optgroup>
                        </select>                       
                      </div>
                      <div class="filter-group">
                        <label class="filter-label">
                          <i class="fas fa-bookmark mr-2"></i>產品
                        </label>
                        <select name="cardTitle" id="cardTitle" onchange="changeTitle();"  style="font-family: 'Noto Sans TC', sans-serif;width:300px;"> 
                          <option value="000/000-000">選擇主題</option> 
                        </select>                       
                      </div>
                      <div class="filter-group">
                        <label class="filter-label">
                          <i class="fas fa-hashtag mr-2"></i>卡號
                        </label>
                        <select name="cardNumber" id="cardNumber" onchange="changeNumber();"  style="font-family: 'Noto Sans TC', sans-serif;"> 
                          <option value="000/000-000">選擇卡號</option> 
                        </select> 		
                      </div>
                    </div>  
                  </div>
              </div>
            </div>

            <!-- 左邊欄位 -->
            <div class="col-lg-6">
                  <div class="card preview-card" id="preview-card-tag">
                      <div class="card-header">
                        <h5 style="font-family: 'Noto Sans TC', sans-serif;"  class="card-title">
                          <i class="fas fa-image mr-2"></i>
                          卡面預覽
                        </h5>                      
                        <div class="card-tools">
                          <!-- Collapse Button -->
                          <button type="button" class="btn btn-tool" data-card-widget="collapse"  data-animation-speed="500"><i class="fas fa-minus"></i></button>
                        </div>				
                      </div>

                      <div class="card-body">
                          <div class="preview-container" id="displayCardPhoto">
                                <div class="image-placeholder">
                                  <i class="fas fa-image"></i>
                                  <p>請選擇卡片查看預覽</p>
                                </div>                          
                                <img id="cardImg" class="img-fluid modern-card-image">
                          </div>  
                          <div class="overlay-wrapper" id="overlay-1">
                                <div class="overlay"><i class="fas fa-3x fa-sync-alt fa-spin"></i><div class="text-bold pt-2">Loading...</div></div>
                          </div>					
                      </div>  
                  </div>   

                  <div class="card info-card">
                    <div class="card-header">
                      <h5 class="card-title">
                        <i class="fas fa-info-circle mr-2"></i>
                        卡片資訊
                      </h5>
                      <div class="card-tools">
                        <button type="button" class="btn btn-tool modern-tool-btn" data-card-widget="collapse" data-animation-speed="500">
                          <i class="fas fa-minus"></i>
                        </button>
                      </div>					
                    </div>
                    <div class="card-body">
          <div class="info-swiper" id="infoSwiper">           
              <!-- 滑動內容容器 -->
              <!-- 第一頁：混合佈局（兩欄 + 單欄） --> 
              <div class="info-items-container" id="infoItemsContainer">
                <div class="info-item mixed-layout active">
                    <!-- 單欄區域的內容（跨越整個寬度） -->      
                    <div class="info-row full-width">
                        <i class="fas fa-star mr-2"></i>
                        <span>卡號</span>
                        <span id="cardno" class="info-value long-text white-space-nowrap">BD/W54-070SSP</span>                     
                    </div>      
                    <div class="info-row full-width">
                        <i class="fas fa-star mr-2"></i>
                        <span>卡名</span>
                        <span id="cardname" class="info-value long-text white-space-nowrap">“鳥籠の歌姫”湊友希那</span>                     
                    </div> 

                    <div class="info-row two-col">
                        <i class="fas fa-star mr-2"></i>
                        <span>稀有度</span>
                        <span id="cardrare" class="info-value">SSP</span>                     
                    </div>
                    <div class="info-row two-col">
                        <i class="fas fa-palette mr-2"></i>
                        <span>顏色</span> 
                        <span id="cardcolor" class="info-value" style="display: inline-block; background: #0437F2; color: #fff; padding: 2px 16px; border-radius: 2px;font-family: sans-serif;">藍</span>
                    </div>
                    <div class="info-row two-col">
                        <i class="fas fa-bolt mr-2"></i>
                        <span>總類</span>
                        <span id="cardkind" class="info-value">3</span>
                    </div>                  
                    <div class="info-row two-col">
                        <i class="fas fa-bolt mr-2"></i>
                        <span>等級</span>
                        <span id="cardlevel" class="info-value">3</span>
                    </div>
                    <div class="info-row two-col">
                        <i class="fas fa-heart mr-2"></i>
                        <span>魂</span>
                        <span id="cardsoul" class="info-value">2</span>
                    </div>
                    <div class="info-row two-col">
                        <i class="fas fa-coins mr-2"></i>
                        <span>Cost</span>
                        <span id="cardcost" class="info-value">2</span>
                    </div>                    
                    <div class="info-row two-col">
                        <i class="fas fa-shield-alt mr-2"></i>
                        <span>Power</span>
                        <span id="cardpower" class="info-value">9500</span>
                    </div>
                  
                    <div class="info-row two-col">
                        <i class="fas fa-magic mr-2"></i>
                        <span>サイド</span>
                        <span id="cardside" class="info-value">W</span>
                    </div>    
                    <div class="info-row two-col">
                        <i class="fas fa-users mr-2"></i>
                        <span>觸發</span>
                        <span id="cardtrigger" class="info-value">1</span>
                    </div>	                      
                    <div class="info-row full-width">
                        <i class="fas fa-fire mr-2"></i>
                        <span>特徵</span>
                        <span id="cardfeatures" class="info-value long-text white-space-nowrap">音楽・Roselia</span>
                    </div>                  
                            
                </div>            
                <div class="info-item single-column"> 
                    <div class="info-row">
                        <i class="fas fa-users mr-2"></i>
                        <span>效果</span>
                        <span class="info-value long-text" id="">【永】 あなたのターン中、他のあなたの《音楽》のキャラ1枚につき、このカードのパワーを＋500。<br>
          【自】 このカードが手札から舞台に置かれた時、あなたは自分のクロックの上から1枚を、控え室に置いてよい。<br>
          【自】【CXコンボ】［(3) 手札を2枚控え室に置く］ このカードのバトル相手が【リバース】した時、あなたのクライマックス置場に「激しいシャウト」があるなら、あなたはコストを払ってよい。そうしたら、次の行動を2回行う。『相手に2ダメージを与える。』（ダメージキャンセルは発生する）</span>
                    </div>				  
                </div>
              </div>
              
              <!-- 滑動指示器 -->
              <div class="swipe-indicators" id="swipeIndicators">
                <div class="swipe-dot active" data-index="0"></div>
                <div class="swipe-dot" data-index="1"></div>
              </div>
          </div>
        </div>	  
      </div>   
              <!-- /.card -->              
            </div>  
          <!-- /.col-md-6 -->
            <!-- 右邊欄位 -->
            <div class="col-lg-6">
                <div class="card">
                  <div class="card-header">
                    <h5 style="font-family: 'Noto Sans TC', sans-serif;" class="card-title">
                      <i class="fas fa-chart-line mr-2"></i>
                      價格走勢 <span class="chart-period">(近半年)</span>
                    </h5>                  
                    <div class="card-tools">
                      <!-- Collapse Button -->
                      <button type="button" class="btn btn-tool" data-card-widget="collapse"  data-animation-speed="500"><i class="fas fa-minus"></i></button>
                      <button type="button" class="btn btn-tool" data-card-widget="maximize"  data-animation-speed="500"><i class="fas fa-expand"></i></button>
                    </div>					
                  </div>
                  <div class="card-body">
                    <div class="chart">
                      <div class="chartjs-size-monitor">
                        <div class="chartjs-size-monitor-expand"></div>
                        <div class="chartjs-size-monitor-shrink"></div>
                      </div>
                      <canvas id="myChart" class="chartjs-render-monitor"></canvas>
                      
                    </div>					
                  </div>
                  <div class="card-footer">
                    <div class="mt-3 text-xs text-gray-500">資料來源：-遊々亭-</div>
                  </div>
                  <div class="overlay-wrapper" id="overlay-2">
                          <div class="overlay"><i class="fas fa-3x fa-sync-alt fa-spin"></i><div class="text-bold pt-2">Loading...</div></div>
                  </div>				  
                </div>
            <!-- 庫存走勢 -->
              <div class="card">
                <div class="card-header">
                  <h5 style="font-family: 'Noto Sans TC', sans-serif;" class="card-title">
                    <i class="fas fa-boxes mr-2"></i>
                    庫存走勢 <span class="chart-period">(近半年)</span>
                  </h5>                
                  <div class="card-tools">
                    <!-- Collapse Button -->
                    <button type="button" class="btn btn-tool" data-card-widget="collapse"  data-animation-speed="500"><i class="fas fa-minus"></i></button>
                    <button type="button" class="btn btn-tool" data-card-widget="maximize"  data-animation-speed="500"><i class="fas fa-expand"></i></button>
                  </div>					
                </div>
                <div class="card-body">
                  <div class="chart">
                    <div class="chartjs-size-monitor">
                      <div class="chartjs-size-monitor-expand"></div>
                      <div class="chartjs-size-monitor-shrink"></div>
                    </div>
                    <canvas id="myStockChart" class="chartjs-render-monitor"></canvas>
                  </div>					
                </div>
                <div class="card-footer">
                  <div class="mt-3 text-xs text-gray-500">資料來源：-遊々亭-</div>
                </div>              
                <div class="overlay-wrapper" id="overlay-3">
                        <div class="overlay"><i class="fas fa-3x fa-sync-alt fa-spin"></i><div class="text-bold pt-2">Loading...</div></div>
                </div>				  
              </div>					  
          </div>
          <!-- /.row -->
        </div>
        <!-- /.container-fluid -->
      </div>
      <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <!-- 在 body 結束標籤前添加浮動按鈕 -->
    <div id="scrollToTopBtn" class="scroll-to-top-btn">
        <i class="fas fa-chevron-up"></i>
    </div>

    <!-- Control Sidebar -->
    <aside class="control-sidebar " id="rightSideBar">
      <!-- Control sidebar content goes here -->
      <div class="p-3">
        <h5><p>服務條款及免責聲明</p></h5>
      <br>
          <p>在使用本網站(ws-cards.cloud)前，請先閱讀利用規約及免責聲明</p><br>
      <button id="annButton"><p>規約及免責聲明</p></button>
      </div>
    </aside>
    <!-- /.control-sidebar -->

    <!-- Main Footer -->
    <footer class="main-footer">
        <!-- To the right -->
        <div class="float-right d-none d-sm-inline">
          <a href="https://docs.google.com/forms/d/1N7_PNmqUfiwGp6w8SJrz0bcbKnojn6hK64L_SOwb1jc"><i class="fas fa-envelope"></i></a>
        </div>	
        <!-- Default to the left -->
        <strong>Copyright &copy; 2020 <a href="https://docs.google.com/forms/d/1N7_PNmqUfiwGp6w8SJrz0bcbKnojn6hK64L_SOwb1jc">WS-Cards</a> </strong> All rights reserved.
        <strong><a onclick="$('#announceexampleModalCenter').modal('show');	" >利用規約</a></strong>
    </footer>
</div>
</div>
<!-- ./wrapper -->

<!-- Announce Modal -->
<div id="card-modal-announce">
	<div class="modal fade" id="announceexampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="announceexampleModalCenterTitle" aria-hidden="true">
	  <div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
		  <div class="modal-header">
			<h5 class="modal-title" id="announceexampleModalLongTitle"><p>利用規約及免責聲明</p></h5>
			<button type="button" class="close" aria-label="Close"  data-dismiss="modal">
			  <span aria-hidden="true">&times;</span>
			</button>
		  </div>
		  <div class="modal-body">
			<div id="announce-card-popup-modal">
				<div class="row">
					<div class="col text">
					<ul>
		<li><p>本網站為非官方資訊網站，僅作為玩家間學術資訊交流使用，任何相關與遊戲資訊、版權等等皆為原官方所有。</p></li>
		<li><p>本網站所刊載的所有價格資訊、文字資料、圖片、影片、連結、商標及其他資料等，僅供參考做使用。</p></li>
		<li><p>若因本網站資訊而導致日後造成相關損失，您需對自行的任何決策負責。</p></li>
		<li><p>雖本網站盡力確保資料的準確性，但如內容有錯誤或是紕漏，本網站不會承擔任何賠償責任。</p></li>
		<li><p>所有本網站之內容，可隨時停止服務或是修改，而不會另行做通知。</p></li>
		<br>
		<p>最終更新日期 2020年12月11日</p>		
					</ul>
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>			  
					</div>				
				</div>
			</div>
		  </div>
		</div>
	  </div>
	</div>
</div>

<!-- REQUIRED SCRIPTS -->

<!--chart.js-->
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<!-- jQuery -->
<script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<!-- Suggest -->
<script src="dist/js/suggest/typeahead.js"></script>	
<!-- Sweet Alert -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://unpkg.com/scroll-hint@latest/js/scroll-hint.min.js"></script>
	
<!-- 實際開發位置 -->
<script src="dist/js/wscards.line-v37.js"></script>
<script src="dist/js/mobile-sidebar-control.js"></script>
<script>
	$('.nav-link').PushMenu('collapse');
			var annButton=document.getElementById('annButton');	
			annButton.addEventListener("click", function(){
				$('#announceexampleModalCenter').modal('show');	
			});	

// 貼上按鈕功能 - 混合方案
document.getElementById('pasteButton').addEventListener('click', async function() {
    const inputElement = document.getElementById('xxxx');
    
    // 方法1: 嘗試現代 Clipboard API
    if (navigator.clipboard && navigator.clipboard.readText) {
        try {
            const text = await navigator.clipboard.readText();
            inputElement.value = text;
            inputElement.dispatchEvent(new Event('input', { bubbles: true }));
            return;
        } catch (err) {
            console.log('Clipboard API failed, trying execCommand');
        }
    }
    
    // 方法3: 提示手動貼上
    Swal.fire({
        icon: 'info',
        title: '請手動貼上',
        text: '請在輸入框中按 Ctrl+V 貼上內容',
        showConfirmButton: true,
        confirmButtonText: '確定'
    }).then(() => {
        inputElement.focus();
    });
});  
//Swal.fire({
//  icon: 'info',
//  title: '公告',
//  text: '4/17 資料已復原可正常查詢'
//})

// 資訊卡片滑動功能
class InfoSwiper {  
   constructor() {
        this.swiper = document.getElementById('infoSwiper');
        this.container = document.getElementById('infoItemsContainer');
        this.items = document.querySelectorAll('.info-item');
        this.indicators = document.querySelectorAll('.swipe-dot');
        
        this.currentIndex = 0;
        this.totalItems = this.items.length;
        
        // 拖拽相關變數
        this.isDragging = false;
        this.startPos = 0;
        this.currentTranslate = 0;
        this.prevTranslate = 0;
        this.animationId = 0;
        
        this.init();
    }
    
    init() {
        // 指示器點擊事件
        this.indicators.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                this.goTo(index);
                // 點擊指示器也算作交互，標記為已看過
                this.markHintAsSeen();
            });
        });
        
        // 滑鼠事件
        this.swiper.addEventListener('mousedown', this.startDrag.bind(this));
        this.swiper.addEventListener('mousemove', this.drag.bind(this));
        this.swiper.addEventListener('mouseup', this.endDrag.bind(this));
        this.swiper.addEventListener('mouseleave', this.endDrag.bind(this));
        
        // 觸控事件
        this.swiper.addEventListener('touchstart', this.startDrag.bind(this));
        this.swiper.addEventListener('touchmove', this.drag.bind(this));
        this.swiper.addEventListener('touchend', this.endDrag.bind(this));
        
        // 禁止圖片拖拽
        this.swiper.addEventListener('dragstart', (e) => e.preventDefault());
        
        // 自動播放提示
        this.startHintAnimation();
    }
    
    startDrag(e) {
        this.isDragging = true;
        this.swiper.classList.add('dragging');
        this.container.classList.add('no-transition');
        
        this.startPos = this.getPositionX(e);
        this.animationId = requestAnimationFrame(this.updatePosition.bind(this));
        // 當用戶開始拖拽時，記錄為已看過提示
        this.markHintAsSeen();    
      }
    
    drag(e) {
        if (!this.isDragging) return;
        
        e.preventDefault();
        const currentPosition = this.getPositionX(e);
        this.currentTranslate = this.prevTranslate + currentPosition - this.startPos;
        
        // 限制拖拽範圍
        const maxTranslate = 0;
        const minTranslate = -(this.totalItems - 1) * this.swiper.offsetWidth;
        
        this.currentTranslate = Math.max(minTranslate, Math.min(maxTranslate, this.currentTranslate));
    }
    
    endDrag() {
        if (!this.isDragging) return;
        
        this.isDragging = false;
        this.swiper.classList.remove('dragging');
        this.container.classList.remove('no-transition');
        
        cancelAnimationFrame(this.animationId);
        
        // 計算最接近的頁面
        const movedBy = this.currentTranslate - this.prevTranslate;
        
        if (Math.abs(movedBy) > this.swiper.offsetWidth * 0.3) {
            if (movedBy < 0 && this.currentIndex < this.totalItems - 1) {
                this.currentIndex += 1;
            } else if (movedBy > 0 && this.currentIndex > 0) {
                this.currentIndex -= 1;
            }
        }
        
        this.setPositionByIndex();
    }
    
    updatePosition() {
        this.container.style.transform = `translateX(${this.currentTranslate}px)`;
        
        if (this.isDragging) {
            requestAnimationFrame(this.updatePosition.bind(this));
        }
    }
    
    getPositionX(e) {
        return e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
    }
    
    setPositionByIndex() {
        this.currentTranslate = this.currentIndex * -this.swiper.offsetWidth;
        this.prevTranslate = this.currentTranslate;
        this.container.style.transform = `translateX(${this.currentTranslate}px)`;
        this.updateIndicators();
        this.updateActiveItem();
    }
    
    goTo(index) {
        this.currentIndex = index;
        this.setPositionByIndex();
    }
    
    updateIndicators() {
        this.indicators.forEach((dot, index) => {
            dot.classList.toggle('active', index === this.currentIndex);
        });
    }
    
    updateActiveItem() {
        this.items.forEach((item, index) => {
            item.classList.toggle('active', index === this.currentIndex);
        });
    }

    // 檢查是否已看過提示
    hasSeenHint() {
        return localStorage.getItem('infoSwiperHintSeen') === 'true';
    }
    
    // 標記提示為已看過
    markHintAsSeen() {
        localStorage.setItem('infoSwiperHintSeen', 'true');
        this.hideHint();
        // console.log('滑動提示已標記為已看過');
    }
    
    // 隱藏提示
    hideHint() {
        this.swiper.classList.add('hint-hidden');
    }

    // 提示動畫- 只顯示一次
    startHintAnimation() {
        // 檢查是否已經看過提示
        if (this.hasSeenHint()) {
            // console.log('用戶已看過滑動提示，跳過顯示');
            this.hideHint();
            return;
        }
        
        // console.log('首次訪問，將顯示滑動提示');
        
        // 2秒後顯示提示（如果還沒有交互）
        setTimeout(() => {
            if (!this.hasSeenHint()) {
                // console.log('顯示滑動提示動畫');
                // 提示會自動通過 CSS 動畫顯示
            }
        }, 2000);
    }
    
    // 響應式處理
    handleResize() {
        this.setPositionByIndex();
    }

    // 重置提示（開發測試用，可選）
    resetHint() {
        localStorage.removeItem('infoSwiperHintSeen');
        this.swiper.classList.remove('hint-hidden');
        console.log('滑動提示已重置');
    }    
}

// 初始化滑動器
document.addEventListener('DOMContentLoaded', function() {
    const infoSwiper = new InfoSwiper();
    
    // 響應式處理
    window.addEventListener('resize', () => {
        infoSwiper.handleResize();
    });

    // 開發者工具：在控制台輸入 resetSwipeHint() 可以重置提示（測試用）
    window.resetSwipeHint = function() {
        infoSwiper.resetHint();
        location.reload();
    };

});

// 回到頂部按鈕功能
(function() {
    const scrollToTopBtn = document.getElementById('scrollToTopBtn');
    let isScrolling = false;
    
    // 平滑滾動到頂部
    function scrollToTop() {
        if (isScrolling) return;
        
        isScrolling = true;
        
        // 使用原生的平滑滾動
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
        
        // 重置滾動狀態
        setTimeout(() => {
            isScrolling = false;
        }, 1000);
    }
    
    // 顯示/隱藏按鈕
    function toggleScrollButton() {
        if (window.pageYOffset > 200) {
            scrollToTopBtn.classList.add('visible');
        } else {
            scrollToTopBtn.classList.remove('visible');
        }
    }
    
    // 節流函數，避免過度觸發
    function throttle(func, limit) {
        let inThrottle;
        return function() {
            const args = arguments;
            const context = this;
            if (!inThrottle) {
                func.apply(context, args);
                inThrottle = true;
                setTimeout(() => inThrottle = false, limit);
            }
        }
    }
    
    // 事件監聽器
    scrollToTopBtn.addEventListener('click', scrollToTop);
    window.addEventListener('scroll', throttle(toggleScrollButton, 100));
    
    // 鍵盤快捷鍵支援 (可選)
    document.addEventListener('keydown', function(e) {
        // 按 Home 鍵回到頂部
        if (e.key === 'Home' && e.ctrlKey) {
            e.preventDefault();
            scrollToTop();
        }
    });
    
    // 初始化檢查
    toggleScrollButton();
})();

// 當搜尋框被 focus 時，篩選卡片變半透明
(function() {
    const searchInput = document.getElementById('xxxx');
    const filterCard = document.getElementById('filter-card-tag');
    
    if (searchInput && filterCard) {
        // 當搜尋框獲得焦點
        searchInput.addEventListener('focus', function() {
            filterCard.classList.add('dimmed');
            console.log('搜尋框被 focus，篩選卡片變半透明');
        });
        
        // 當搜尋框失去焦點
        searchInput.addEventListener('blur', function() {
            // 延遲一點再移除效果，避免點擊下拉選項時閃爍
            setTimeout(() => {
                filterCard.classList.remove('dimmed');
                console.log('搜尋框失去 focus，篩選卡片恢復正常');
            }, 150);
        });
    }
})();
</script>

</body>
</html>
